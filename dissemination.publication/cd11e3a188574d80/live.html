<!------------------------------------------------------------------------------------------->
<hr>

<center>
<B>This live report demonstrates how <a href="http://github.com/ctuning/ck">CK</a> can 
help create researchers reproducible and interactive article from reusable components</b>
<br>
</center>

<hr>

<ul>
 <li>GitHub repository with shared artifacts in CK format: <a href="http://github.com/ctuning/reproduce-ck-paper">reproduce-ck-paper</a>, 
           <a href="http://github.com/ctuning/reproduce-ck-paper-large-experiments">reproduce-ck-paper-large-experiments</a>, 
           <a href="http://github.com/ctuning/ctuning-programs">ctuning-programs</a>, 
           <a href="http://github.com/ctuning/ctuning-datasets-min">ctuning-datasets-min</a>, 
           <a href="http://github.com/ctuning/ck-analytics">ck-analytics</a>, 
           <a href="http://github.com/ctuning/ck-autotuning">ck-autotuning</a>, 
           <a href="http://github.com/ctuning/ck-env">ck-env</a> 
 <li><a href="$#ck_root_url#$action=pull&common_func=yes&cid=29db2248aba45e59:cd11e3a188574d80&filename=doc.bib">BIB</a>
 <li><a href="http://arxiv.org/abs/1506.06256">Open archive (ArXiv) with PDF</a>
 <li><a href="http://bit.ly/ck-date16">Related DATE'16 article (PDF)</a>
 <li><a href="https://github.com/ctuning/ck/wiki">Wiki describing how to reproduce some experiments via CK</a>
 <li><a href="https://www.reddit.com/r/programming/comments/3bh9v0/so_all_software_engineers_need_is_a_collective">Some reddit discussions</a>
 <li><a href="http://www.tetracom.eu">Partially funded by TETRACOM project</a>
 <li><a href="http://github.com/ctuning/ck">Related Collective Knowledge infrastructure and repository (CK)</a>
 <li><a href="http://c-mind.org/repo">Related Collective Mind infrastructure and repository (deprecated for CK)</a>
 <li>Extends our previous work: <a href="https://hal.inria.fr/inria-00436029">1</a>, 
      <a href="https://scholar.google.com/citations?view_op=view_citation&hl=en&citation_for_view=IwcnpkwAAAAJ:hqOjcs7Dif8C">2</a>,
      <a href="https://scholar.google.com/citations?view_op=view_citation&hl=en&citation_for_view=IwcnpkwAAAAJ:qjMakFHDy7sC">3</a>,
      <a href="https://scholar.google.com/citations?view_op=view_citation&hl=en&citation_for_view=IwcnpkwAAAAJ:9yKSN-GCB0IC">4</a>,
      <a href="https://hal.inria.fr/hal-00685276">5</a>
 <li><a href="https://scholar.google.com/citations?view_op=view_citation&hl=en&citation_for_view=IwcnpkwAAAAJ:isC4tDSrTZIC">Supports our open publication model</a>
</ul>

<!------------------------------------------------------------------------------------------->
<hr>

<table cellpading="5">
 <tr>
  <td>
   Here we provide details how to reproduce experiments from our
   papers via <a href="http://github.com/ctuning/ck">Collective
   Knowledge Framework and Repository (CK)</a>. All artifacts are
   shared via <a
   href="http://github.com/ctuning/reproduce-ck-paper">CK
   "reproduce-ck-paper" repository</a> at GitHub. If you have
   CK installed (<a href="http://github.com/ctuning/ck/wiki">docs</a>), 
   you can download and install this repository via CMD simply as<BR>
   <i><pre>
    ck pull repo:reproduce-ck-paper
   </pre></i>
   We would like to thank the community for validating various results and sharing unexpected behavior with us
   via our <a href="http://cknowledge.org/repo">public CK repository</a>!
  </td>
  <td>
   <img src="$#ck_root_url#$action=pull&common_func=yes&cid=1e4e644996b7f2a0:6b411f75e774059b&filename=images/stamp-validated-by-the-community.png">
  </td>
  <td>
   <img src="$#ck_root_url#$action=generate&module_uoa=qr-code&qr_level=6&image_size=170&string=$#ck_root_url#$wcid=29db2248aba45e59:cd11e3a188574d80">
  </td>
 </tr>
</table>


<!------------------------------------------------------------------------------------------->
<hr>

<b>Abstract</b>

<p>
Nowadays, engineers have to develop software often without even
knowing which hardware it will eventually run on in numerous
mobile phones, tablets, desktops, laptops, data centers,
supercomputers and cloud services.

Unfortunately, optimizing compilers are not keeping pace with
ever increasing complexity of ever changing computer systems
anymore and may produce severely underperforming executable codes
while wasting expensive resources and energy.

<p>

We present the first to our knowledge practical, collaborative
and publicly available solution to this problem.

We help the software engineering community gradually implement 
and share light-weight wrappers around any software piece with 
more than one implementation or optimization choice available.

These wrappers are connected with a public <a href="http://c-mind.org">
Collective Mind autotuning infrastructure and repository of 
knowledge</a>&nbsp;<sup>*</sup>&nbsp;
to continuously monitor all important characteristics of these pieces
(<i>computational species</i>) across numerous existing hardware
configurations in realistic environments together with randomly
selected optimizations.

At the same time, <a href="http://c-mind.org/cmn">Collective Mind Node</a>
allows to easily crowdsource time-consuming autotuning across
existing Android-based mobile device including commodity
mobile phones and tables. 

<p>

Similar to natural sciences, we can now continuously track all
winning solutions (optimizations for a given hardware such
as compiler flags, OpenCL/CUDA/OpenMP/MPI/skeleton parameters,
number of threads and any other exposed by users) that minimize
all costs of a computation (execution time, energy spent, code
size, failures, memory and storage footprint, optimization time,
faults, contentions, inaccuracy and so on) of a given species
on a Pareto frontier along with any unexpected behavior
at <a href="http://c-mind.org/repo">c-mind.org/repo</a>.

Furthermore, the community can continuously classify solutions, 
prune redundant ones, and correlate them with various features
of software, its inputs (data sets) and used hardware either
manually (similar to Wikipedia) or using available big data 
analytics and machine learning techniques.

<p>

Our approach can also help computer engineering community create 
the first public, realistic, large, diverse, distributed, representative,
and continuously evolving benchmark with related optimization
knowledge while gradually covering all possible software and
hardware to be able to predict best optimizations and improve
compilers depending on usage scenarios and requirements.

Such continuously growing collective knowledge accessible via
simple web service can become an integral part of the practical
software and hardware co-design of self-tuning computer systems 
as we demonstrate in several real usage scenarios validated 
in industry.

<p>

<sup>*</sup>
<i>
Note that we have moved all our developments to a newer, smaller, 
simpler and faster version of Collective Mind aka Collective Knowledge or CK. 
This open source, BSD-licensed framework with a live repository is available here:
<a href="http://github.com/ctuning/ck">http://github.com/ctuning/ck</a> 
and <a href="http://cknowledge.org/repo">http://cknowledge.org/repo</a>.
Documentation with all examples is also available at <a href="http://github.com/ctuning/ck/wiki">http://github.com/ctuning/ck/wiki</a>.
</i>

<!------------------------------------------------------------------------------------------->
<hr>

<H1>P1</H1>

<center>

<B>Reproducing adaptive filter experiments (collaboratively finding features which are not in the system to enable run-time adaptation):</B>

<p>
CK scripts: <a href="$#ck_root_url#$wcid=84e27ad9dd12e734:25483ab234fb4deb">reproduce-filter-speedup</a>

<p>

CK datasets:

<table border="1" cellpadding="5" cellspacing="0">
 <tr>
  <td align="center" valign="top">
   Data set <a href="$#ck_root_url#$wcid=8a7141c59cd335f5:c8848a1b1fb1775e">"image-raw-bin-fgg-office-day-gray"</a> 
   &nbsp;&nbsp;(<a href="$#ck_root_url#$wcid=87b55c4f4a2482da:c8848a1b1fb1775e">features</a>)
  </td>
  <td align="center" valign="top">
   Data set <a href="$#ck_root_url#$wcid=8a7141c59cd335f5:0045c9b59e84318b">"image-raw-bin-fgg-office-night-gray"</a>
   &nbsp;&nbsp;(<a href="$#ck_root_url#$wcid=87b55c4f4a2482da:0045c9b59e84318b">features</a>)
  </td>
 </tr>
 <tr>
  <td align="center" valign="top">
   <img src="$#ck_root_url#$action=pull&common_func=yes&cid=8a7141c59cd335f5:c8848a1b1fb1775e&filename=data_orig.jpg" width="200">
  </td>
  <td align="center" valign="top">
   <img src="$#ck_root_url#$action=pull&common_func=yes&cid=8a7141c59cd335f5:0045c9b59e84318b&filename=data_orig.jpg" width="200">
  </td>
 </tr>
</table>

<p>
<i>Lenovo X240; Intel(R) Core(TM) i5-4210U CPU @ 1.70GHz; Ubuntu 14.04 64bit; GCC 4.4.4<br> 
(CK public repo: <a href="$#ck_root_url#$wcid=bc0409fb61f0aa82:f9607cb4d3383376">all experiments</a>, 
<a href="$#ck_root_url#$wcid=36ebc331048475bb:ae4015ad50f6974f">compiler description</a>,
<a href="$#ck_root_url#$wcid=36ebc331048475bb:">all compilers</a>)</i>

  <table border="1">
  <tr>
    <td></td>
    <td></td>
    <td>Dataset image-raw-bin-fgg-office-day-gray:</td>
    <td>Dataset image-raw-bin-fgg-office-night-gray:</td>
   </tr>
  <tr>
    <td>Optimization:</td>
    <td>Binary size:</td>
    <td>min time (s); exp time (s); var (%):</td>
    <td>min time (s); exp time (s); var (%):</td>
   </tr>
  <tr>
    <td>-O3</td>
    <td>10776</td>
    <td>      4.622 ;       4.634 ;    0.7%</td>
    <td>      4.630 ;       4.653 ;    1.0%</td>
   </tr>
  <tr>
    <td>-O3 -fno-if-conversion</td>
    <td>10784</td>
    <td>      5.169 ;       5.193 ;    1.0% <b><span style="color:#FF0000";>(Slow down over -O3: 1.12)</span></b></td>
    <td>      4.091 ;       4.094 ;    0.2% <b><span style="color:#FF0000";>(Speed up over -O3: 1.14)</span></b></td>
   </tr>
  <tr>
    <td>-O2</td>
    <td>10168</td>
    <td>      4.631 ;       4.754 ;   10.2%</td>
    <td>      4.623 ;       4.639 ;    0.7%</td>
   </tr>
  <tr>
    <td>-O1</td>
    <td>10152</td>
    <td>      4.621 ;       4.633 ;    0.8%</td>
    <td>      4.623 ;       4.685 ;    3.6%</td>
   </tr>
  <tr>
    <td>-Os</td>
    <td>9744</td>
    <td>      4.668 ;       4.678 ;    0.6%</td>
    <td>      4.666 ;       4.685 ;    0.9%</td>
   </tr>
  </table>

<BR>
<b>Note: CK allows the community to continue validating above results and share unexpected behavior in public cknowledge.org/repo 
<a href="http://cknowledge.org/repo/web.php?wcid=bc0409fb61f0aa82:reproduce-ck-paper-filter-optimization">here</a>. See some
of such shared results below:</b>
<BR>


<p>
<i>Lenovo X240; Intel(R) Core(TM) i5-4210U CPU @ 1.70GHz; Ubuntu 14.04 64bit; GCC 4.9.1<br> 
(CK public repo: <a href="$#ck_root_url#$wcid=bc0409fb61f0aa82:1814383993c4d02b">all experiments</a>, 
<a href="$#ck_root_url#$wcid=36ebc331048475bb:2a7072446aaa0544">compiler description</a>,
<a href="$#ck_root_url#$wcid=36ebc331048475bb:">all compilers</a>)</i>

  <table border="1">
  <tr>
    <td></td>
    <td></td>
    <td>Dataset image-raw-bin-fgg-office-day-gray:</td>
    <td>Dataset image-raw-bin-fgg-office-night-gray:</td>
   </tr>
  <tr>
    <td>Optimization:</td>
    <td>Binary size:</td>
    <td>min time (s); exp time (s); var (%):</td>
    <td>min time (s); exp time (s); var (%):</td>
   </tr>
  <tr>
    <td>-O3</td>
    <td>11008</td>
    <td>      4.619 ;       4.630 ;    0.6%</td>
    <td>      4.603 ;       4.628 ;    1.0% <b><span style="color:#FF0000";>(slower than GCC 4.4.4 -O3 -fno-if-conversion)</span></b></td>
   </tr>
  <tr>
    <td>-O3 -fno-if-conversion</td>
    <td>11008</td>
    <td>      4.615 ;       4.625 ;    0.6%</td>
    <td>      4.624 ;       4.628 ;    0.3% <b><span style="color:#FF0000";>(slower than GCC 4.4.4 -O3 -fno-if-conversion)</span></b></td>
   </tr>
  <tr>
    <td>-O2</td>
    <td>10880</td>
    <td>      4.632 ;       4.635 ;    0.1%</td>
    <td>      4.602 ;       4.647 ;    2.5%</td>
   </tr>
  <tr>
    <td>-O1</td>
    <td>10360</td>
    <td>      4.625 ;       4.637 ;    0.7%</td>
    <td>      4.630 ;       4.654 ;    1.8%</td>
   </tr>
  <tr>
    <td>-Os</td>
    <td>10376</td>
    <td>      4.635 ;       4.653 ;    0.8%</td>
    <td>      4.630 ;       4.652 ;    0.8%</td>
   </tr>
  </table>

<p>
<i>Lenovo X240; Intel(R) Core(TM) i5-4210U CPU @ 1.70GHz; Ubuntu 14.04 64bit; <b>GCC 5.2.0</b><br>
(CK public repo: <a href="$#ck_root_url#$wcid=bc0409fb61f0aa82:c792a74d78b19246">all experiments</a>, 
<a href="$#ck_root_url#$wcid=36ebc331048475bb:aff616f4c8d81fdf">compiler description</a>,
<a href="$#ck_root_url#$wcid=36ebc331048475bb:">all compilers</a>)</i>

  <table border="1">
  <tr>
    <td></td>
    <td></td>
    <td>Dataset image-raw-bin-fgg-office-day-gray:</td>
    <td>Dataset image-raw-bin-fgg-office-night-gray:</td>
   </tr>
  <tr>
    <td>Optimization:</td>
    <td>Binary size:</td>
    <td>min time (s); exp time (s); var (%):</td>
    <td>min time (s); exp time (s); var (%):</td>
   </tr>
  <tr>
    <td>-O3</td>
    <td>10776</td>
    <td>      4.622 ;       4.632 ;    0.8%</td>
    <td>      4.630 ;       4.631 ;    0.2%<b><span style="color:#FF0000";>(slower than GCC 4.4.4 -O3 -fno-if-conversion)</span></td>
   </tr>
  <tr>
    <td>-O3 -fno-if-conversion</td>
    <td>10776</td>
    <td>      4.629 ;       4.649 ;    0.8%</td>
    <td>      4.610 ;       4.626 ;    1.1%<b><span style="color:#FF0000";>(slower than GCC 4.4.4 -O3 -fno-if-conversion)</span></td>
   </tr>
  <tr>
    <td>-O2</td>
    <td>10568</td>
    <td>      4.599 ;       4.610 ;    0.6%</td>
    <td>      4.597 ;       4.603 ;    0.4%</td>
   </tr>
  <tr>
    <td>-O1</td>
    <td>10032</td>
    <td>      4.613 ;       4.616 ;    0.2%</td>
    <td>      4.605 ;       4.616 ;    0.8%</td>
   </tr>
  <tr>
    <td>-Os</td>
    <td>10088</td>
    <td>      4.609 ;       4.630 ;    1.4%</td>
    <td>      4.608 ;       4.615 ;    0.4%</td>
   </tr>
  </table>

<p>
<i>Just for comparison during crowd-benchmarking: Samsung Chromebook 2; Samsung EXYNOS5; ARM Cortex A15/A7; ARM Mali-T628; Ubuntu 12.04 32bit; GCC 4.9.2<br>
(CK public repo: <a href="$#ck_root_url#$wcid=bc0409fb61f0aa82:1048e0a14ce3d8bb">all experiments</a>, 
<a href="$#ck_root_url#$wcid=36ebc331048475bb:2a7072446aaa0544">compiler description</a>,
<a href="$#ck_root_url#$wcid=36ebc331048475bb:">all compilers</a>)</i>

  <table border="1">
  <tr>
    <td></td>
    <td></td>
    <td>Dataset image-raw-bin-fgg-office-day-gray:</td>
    <td>Dataset image-raw-bin-fgg-office-night-gray:</td>
   </tr>
  <tr>
    <td>Optimization:</td>
    <td>Binary size:</td>
    <td>min time (s); exp time (s); var (%):</td>
    <td>min time (s); exp time (s); var (%):</td>
   </tr>
  <tr>
    <td>-O3</td>
    <td>7416</td>
    <td>      7.396 ;       7.513 ;    2.9%</td>
    <td>      7.390 ;       7.464 ;    2.6%</td>
   </tr>
  <tr>
    <td>-O3 -fno-if-conversion</td>
    <td>7424</td>
    <td>      7.345 ;       7.455 ;    3.8%</td>
    <td>      7.384 ;       7.490 ;    2.6%</td>
   </tr>
  <tr>
    <td>-O2</td>
    <td>7100</td>
    <td>      7.398 ;       7.926 ;   39.2%</td>
    <td>      7.450 ;       7.514 ;    2.3%</td>
   </tr>
  <tr>
    <td>-O1</td>
    <td>7072</td>
    <td>      7.404 ;       7.444 ;    1.4%</td>
    <td>      7.389 ;       7.443 ;    2.9%</td>
   </tr>
  <tr>
    <td>-Os</td>
    <td>6292</td>
    <td>      7.367 ;       7.409 ;    1.5%</td>
    <td>      7.375 ;       7.479 ;    2.7%</td>
   </tr>
  </table>

</center>

<br>

<b>Above results support our wrapper based approach (computational species) across various
most-time consuming kernels and libraries combined with exposed features and automatically
built and continuously refined decision trees via CK as described in this paper and 
<a href="$#ck_root_url#$wcid=29db2248aba45e59:6f40bc99c4f7df58#$">its first part</a>.
They also demonstrate that it is possible to use CK to balance decision tree's prediction 
rate (accuracy) versus size and speed to ensure that the ultimate decision tree 
implemented in C and embedded in a kernel wrapper is fast and compact enough.
</b>

<br>
<br>

<!------------------------------------------------------------------------------------------->
<hr>

<i>Note: we are gradually converting all the code and data related to this paper
from the deprecated Collective Mind Format to the new Collective Knowledge Framework.</i>

<br>
<br>
